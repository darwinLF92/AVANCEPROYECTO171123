{% extends 'base.html' %}
{% load humanize %}

{% block content %}
    <h1>Detalle de Ventas</h1>
    <p><strong>ID Venta:</strong> {{ venta.id }}</p>
    <p><strong>Fecha:</strong> {{ venta.fecha_creacion }}</p>
    <p><strong>Nit:</strong> {{ venta.cliente.nit }}</p>
    <p><strong>Cliente:</strong> {{ venta.cliente.nombre }}</p>
    <p><strong>Direccion:</strong> {{ venta.cliente.direccion }}</p>
    <p><strong>Telefono:</strong> {{ venta.cliente.telefono }}</p>
    <p><strong>Total:</strong> {{ venta.total }}</p>
    <p><strong>Tipo Pago:</strong> {{ venta.tipo_pago }}</p>

    <h2>Productos Vendidos</h2>
    <table>
        <thead>
            <tr>
                <th>Producto</th>
                <th>Cantidad</th>
                <th>Precio</th>
                <th>Descuento</th>
                <th>Subtotal</th>
            </tr>
        </thead>
        <tbody>
            {% for detalle in detalles %}
            <tr>
                <td>{{ detalle.producto.nombre }}</td>
                <td>{{ detalle.cantidad|intcomma }}</td>
                <td>{{ detalle.precio }}</td>
                <td>{{ detalle.descuento }}</td>
                <td>{{ detalle.subtotal|floatformat:2|intcomma }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5">No hay productos en esta venta.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}