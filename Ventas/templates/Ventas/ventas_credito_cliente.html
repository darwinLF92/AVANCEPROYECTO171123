{% extends 'base.html' %}
{% load humanize %}

{% block content %}
  <h2>Ventas al Cr√©dito por Cliente</h2>
  <table>
    <thead>
      <tr>
        <th>Cliente</th>
        <th>Documentos</th>
        <th>Total Inicial</th>
        <th>Abonos</th>
        <th>Saldo Pendiente</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      {% for cliente, datos in ventas_por_cliente.items %}
        <tr>
          <td>{{ cliente.nombre }}</td>
          <td>{{ datos.ventas|length|intcomma }}</td>
          <td>{{ datos.total_inicial|floatformat:2|intcomma }}</td>
          <td>{{ datos.total_abonos|floatformat:2|intcomma }}</td>
          <td>{{ datos.saldo_pendiente|floatformat:2|intcomma }}</td>
          <td>
            <a href="{% url 'Ventas:lista_creditos' cliente.id %}">Ver Detalles</a>
          </td>
        </tr>
      {% endfor %}
    </tbody>
    <tr>
      <td>Totales:</td>
      <td>{{ suma_total_documentos|intcomma }}</td>
      <td>{{ suma_total_inicial|floatformat:2|intcomma }}</td>
      <td>{{ suma_abonos|floatformat:2|intcomma }}</td>
      <td>{{ suma_saldo_pendiente|floatformat:2|intcomma }}</td>
    </tr>
  </table>
{% endblock %}
